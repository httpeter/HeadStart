<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"      
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets" 
      xmlns:p="http://primefaces.org/ui">

    <h:head>               
        <ui:include src="included/head.xhtml"/>
        <title>#{labels.appTitle} - #{labels.organizationName}</title>
    </h:head>

    <h:body>

        <h:form>

            <ui:include src="included/menu.xhtml"/>                   


            <p:panel id="imPanel">

                <h:outputText value="Title: MyMap" 
                              style="font-size: large; font-weight: bold"/> 

                <br/>
                <br/>

                <p:spacer width="45" height="0"/>
                <h:outputText value="Goals"  style="font-size: larger"/>                
                <p:spacer width="130" height="0"/>

                <h:outputText value="Actors"  style="font-size: larger"/>
                <p:spacer width="130" height="0"/>                

                <h:outputText value="Impacts"  style="font-size: larger"/>
                <p:spacer width="130" height="0"/>                

                <h:outputText value="Deliverables"  style="font-size: larger"/>
                <p:spacer width="130" height="0"/>                

                <h:outputText value="User Stories" style="font-size: larger"/>
                <p:spacer width="170" height="0"/>                                   

                <ui:repeat value="#{impactMapController.impactMaps}" 
                           var="ims">

                    <p:tree value="#{ims}"                                                    
                            var="im"                            
                            orientation="horizontal"  >

                        <p:treeNode>
                            <p:inplace editor="true" toggleable="true">
                                <p:inputText value="#{im}"/>                       
                            </p:inplace>                                   
                        </p:treeNode>                    

                    </p:tree>

                </ui:repeat>

                <br/>

                <p:commandButton icon="fa fa-gear" 
                                 rendered="#{impactMapController.impactMaps.size()!=0}"/>

            </p:panel>





            <p:panel>                

                <p:splitButton id="advanced" value="Add"  
                               icon="pi pi-plus" 
                               filter="true" 
                               filterMatchMode="startsWith">

                    <p:submenu label="New" icon="fa fa-plus">
                        <p:menuitem value="Goal"
                                    icon="pi pi-plus"
                                    action="#{impactMapController.newIM()}"
                                    update="imPanel"/>
                        <p:menuitem value="Actor"
                                    icon="pi pi-plus" 
                                    disabled="true"/>     
                        <p:menuitem value="Implact"
                                    icon="pi pi-plus" 
                                    disabled="true"/>                
                        <p:menuitem value="Deliverable"
                                    icon="pi pi-plus"
                                    disabled="true"/>                
                        <p:menuitem value="Userstory"
                                    icon="pi pi-plus"
                                    disabled="true"/>                
                    </p:submenu>     

                </p:splitButton>     

                <p:separator/>



            </p:panel>


        </h:form>

    </h:body>

</html>